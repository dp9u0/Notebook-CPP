# 变量，数据类型与内存

```c
int a = 1;
```

* 变量定义：就是在内存中为变量分配空间，并指定变量的类型和名称，例如 int a;。
* 变量声明：就是告诉编译器变量的类型和名称，但不分配空间，例如 extern int a;。变量声明可以多次，但只能定义一次。
* 变量初始化：就是在定义或声明变量时，给变量赋上一个初始值，例如 int a = 0;。初始化可以避免变量使用前未赋值的错误。
* 变量赋值：就是在变量已经定义或声明后，给变量重新赋上一个新值，例如 a = 1;。赋值会覆盖掉原来的值。

## 整数

原码，反码，补码的定义，以及为什么有符号整数使用补码表示

为什么最终选择了补码，简单来说，是为了将有符号加减法转换无符号加法，这样计算机只需要实现加法器就可以了。

例如，使用三位二进制编码有符号整数，补码方案可以将 `1 - 3` 以及 `1 + (-3)`，转换为  `1 + 5` 等于 `0x001 + 0x101 = 0x110` ，`0x110`表示的有符号整数即 -2，表示的无符号整数为 6；

这样就实现了 有符号整数加减法/无符号整数加减法规则的统一。

整数取值范围

| Type | char | short  | int         | long                 |
| ---- | ---- | ------ | ----------- | -------------------- |
|      | -128 | -32768 | -2147483648 | -9223372036854775808 |
|      | 127  | 32767  | 2147483647  | 9223372036854775807  |

整数默认类型为 int

```c
long a = 100; // 100 转换为 int 赋值给 a
int b = 100;
long c = 100L;
```

## 浮点数

浮点数表示方法为`V = (-1)^s * M * 2 ^ E`

* s : 符号,1位符号位s直接编码符号 s
* M : 尾数,n位小数字段 frac = f[n-1]f[kn-1]f[n-3]...f[0] 编码尾数 M
  * 规格化数中，M = 1.frac
  * 非规格化数，M = 0.frac
* E : 阶码,k位阶码字段 exp = e[k-1]e[k-1]e[k-3]...e[0] 编码阶码 E (median = 2^(n-1) - 1)
  * exp 不全为0或者不全为1，为规格化数，E = exp - median
  * exp 全为0，为非规格化数，E = 1 - median
  * exp 为 1 为特殊数字

浮点数默认类型为 double

```c
float a = 100.1; // 100.1 转换为 float 赋值给 a
double b = 100.1;
float c = 100.1F;
```

## 字符

字符本质上是一个数字，代表在字符集中的“编号”。

C 中的 char 表示 ascii 编码字符

```c
char a = 'A';
char b = 'B';
int c = 67;
int d = 68;
printf("%c: %d\n", a, a);
printf("%c: %d\n", b, b);
printf("%c: %d\n", c, c);
printf("%c: %d\n", d, d);
```

* 对于 char 类型的**窄字符**，始终使用 ASCII 编码。
* 对于 char 类型的**窄字符串**，GCC使用和源文件编码相同的编码。
* 对于 wchar_t 类型的宽字符和宽字符串，使用 UTF-16 或者 UTF-32 编码，它们都是基于 Unicode 字符集的。

## 关键字

由ANSI标准定义的C语言关键字共32个:

auto double int struct break else long switch

case enum register typedef char extern return union

const float short unsigned continue for signed void

default goto sizeof volatile do if while static

根据关键字的作用，可以将关键字分为数据类型关键字和流程控制关键字两大类。

一、数据类型关键字

A基本数据类型（5个）

* void：声明函数无返回值或无参数，声明无类型指针，显式丢弃运算结果
* char：字符型类型数据，属于整型数据的一种
* int：整型数据，通常为编译器指定的机器字长
* float：单精度浮点型数据，属于浮点数据的一种
* double：双精度浮点型数据，属于浮点数据的一种

B类型修饰关键字（4个）

* short：修饰int，短整型数据，可省略被修饰的int。
* long：修饰int，长整形数据，可省略被修饰的int。
* signed：修饰整型数据，有符号数据类型
* unsigned：修饰整型数据，无符号数据类型

C复杂类型关键字（5个）

* struct：结构体声明
* union：共用体声明
* enum：枚举声明
* typedef：声明类型别名
* sizeof：得到特定类型或特定类型变量的大小

D存储级别关键字（6个）

* auto：指定为自动变量，由编译器自动分配及释放。通常在栈上分配
* static：指定为静态变量，分配在静态变量区，修饰函数时，指定函数作用域为文件内部
* register：指定为寄存器变量，建议编译器将变量存储到寄存器中使用，也可以修饰函数形参，建议编译器通过寄存器而不是堆栈传递参数
* extern：指定对应变量为外部变量，即在另外的目标文件中定义，可以认为是约定由另外文件声明的对象的一个“引用“
* const：与volatile合称“cv特性”，指定变量不可被当前线程/进程改变（但有可能被系统或其他线程/进程改变）
* volatile：与const合称“cv特性”，指定变量的值有可能会被系统或其他进程/线程改变，强制编译器每次从内存中取得该变量的值

二、流程控制关键字

A跳转结构（4个）

* return：用在函数体中，返回特定值（或者是void值，即不返回值）
* continue：结束当前循环，开始下一轮循环
* break：跳出当前循环或switch结构
* goto：无条件跳转语句

B分支结构（5个）

* if：条件语句
* else：条件语句否定分支（与if连用）
* switch：开关语句（多重分支语句）
* case：开关语句中的分支标记
* default：开关语句中的“其他”分支，可选。

C循环结构（3个）

for：for循环结构，for(1;2;3)4;的执行顺序为1->2->4->3->2...循环，其中2为循环条件
do：do循环结构，do 1 while(2);的执行顺序是1->2->1...循环，2为循环条件
while：while循环结构，while(1) 2;的执行顺序是1->2->1...循环，1为循环条件
以上循环语句，当循环条件表达式为真则继续循环，为假则跳出循环。
