# 数组和指针

## 数组

C 的数组是静态的，不支持动态改变长度。

## 指针

\* 表示的含义：

* 表示乘法
* 表示定义一个指针变量 int *p = &a
* 表示获取指针指向的数据

### 字符串

有两种定义字符串的方式：在内存中的存储位置不同，使得字符数组可以读取和修改，而字符串常量只能读取不能修改。

```c
char *str1 = "this is a string";
char str2[] ="this is a string";
```

### 二级指针

```c
int a = 100;
int *p1 = &a;
int **p2 = &p1; // 指向指针的指针
```

## 指针和数组不是等价的，数组在某些场景下会转换为指针

C语言标准规定，当数组名作为数组定义的标识符（也就是定义或声明数组时）、sizeof 或 & 的操作数时，它才表示整个数组本身，在其他的表达式中，数组名会被转换为指向第 0 个元素的指针（地址）。

对数组的引用 a[i] 被编译器 *(a+i)

作为函数形参的数组始终会被编译器修改成指向数组第一个元素的指针，不管形参被定义成数组形式还是指针形式，在函数内部，都会被当作指针对待。

```c
int (*p2)[5];  // 数组指针 : 指向数组的指针
int *p1[5];    // 指针数组 : 数组，元素都是指针
```

## 函数指针

`returnType (*pointerName)(param list)`

```c
int sum(int,int);

int main()
{
  int (*sumpionter)(int,int) = sum;
  (*sumpionter)(100,100);
}
int (*(*(*pfunc)(int *))[5])(int *)
```

|                | 解释                                             |
| -------------- | ------------------------------------------------ |
| `int *p;`      | 指向 int 类型的数据，也可以指向int arr[n] 数组。 |
| `int **p;`     | 二级指针，指向 int * 类型的数据。                |
| `int *p[n];`   | 指针数组。                                       |
| `int (*p)[n];` | 二维数组指针。                                   |
| `int *p();`    | 是一个函数，它的返回值类型为 int *。             |
| `int (*p)();`  | 是一个函数指针，指向原型为 int func() 的函数。   |
